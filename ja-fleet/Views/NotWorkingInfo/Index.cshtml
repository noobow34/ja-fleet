@model NotWorkingInfoModel
@section HeadPartial{
    <meta name="description" content="非稼働情報のページです。JA-Fleetは日本国内の航空会社が保有する機材（飛行機）を一覧表示や検索できるサイトです。">
    <meta name="referrer" content="no-referrer" />

    <meta property="og:type" content="article" />
    <meta property="og:description" content="非稼働情報のページ。JA-Fleetは日本国内の航空会社が保有する機材（飛行機）を一覧表示や検索できるサイトです。" />
    <meta property="og:image" content="https://ja-fleet.noobow.me/images/JA-Fleet_1_og.png" />
    <meta property="og:url" content="https://ja-fleet.noobow.me/@Context.Request.Path" />
    <meta property="og:site_name" content="JA-Fleet【本邦航空会社機材一覧サイト】" />
    <meta content="summary" name="twitter:card" />
    <meta content="@@ja_fleet" name="twitter:site" />
}
<h2>非稼働情報</h2>
<div class="form-group">
    最終稼働日が @Html.TextBox("fromDate",null, null, new {type = "date" }) 以前
</div>
毎日朝6時頃にFlightradar24から取得した情報をそのまま表示してます。
<table id="notWorkingInfoTable" class="display cell-border compact dt-body-center nowrap" style="width:100%">
    <thead>
        <tr>
            <th>最終稼働日時</th>
            <th>機体記号</th>
            <th>From</th>
            <th>To</th>
            <th>便名</th>
            <th>ステータス</th>
        </tr>
    </thead>
</table>

@section ScriptsPartial{
    <script>
        var table;
        $(function () {
            let gridheight;

            $("#fromDate").val(dayjs().add(-3,"day").format("YYYY-MM-DD"));

            if (window.innerHeight < 800) {
                gridheight = '60vh';
            } else {
                gridheight = '68vh';
            }

            datatablesLangInit();

            table = $('#notWorkingInfoTable').DataTable({
                ajax: {
                    url: '/NotWorkingInfo/GetInfo?fromDate=' + getFromDate(),
                    dataSrc: ''
                },
                columns: [
                    { data: 'flightDate', className: 'dt-center' },
                    { data: 'registrationNumber', className: 'dt-center' },
                    { data: 'fromAp', className: 'dt-center' },
                    { data: 'toAp', className: 'dt-center' },
                    { data: 'flightNumber', className: 'dt-center' },
                    { data: 'status', className: 'dt-center' }
                ],
                paging: false,
                ordering: true,
                fixedHeader: true,
                scrollY: gridheight,
                scrollX: true,
                scrollCollapse: true,
                searching: false
            });
        });

        const getFromDate = function () {
            if ($("#fromDate").val() == null) {
                $("#fromDate").val(dayjs().add(-3,"day").format("YYYY-MM-DD"));
            }
            return $("#fromDate").val();
        }

        $("#fromDate").change(function () {
            table.ajax.url('/NotWorkingInfo/GetInfo?fromDate=' + getFromDate()).load();
        });

    </script>
}